%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% University Assignment Title Page 
% LaTeX Template
% Version 1.0 (27/12/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% WikiBooks (http://en.wikibooks.org/wiki/LaTeX/Title_Creation)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
% 
% Instructions for using this template:
% This title page is capable of being compiled as is. This is not useful for 
% including it in another document. To do this, you have two options: 
%
% 1) Copy/paste everything between \begin{document} and \end{document} 
% starting at \begin{titlepage} and paste this into another LaTeX file where you 
% want your title page.
% OR
% 2) Remove everything outside the \begin{titlepage} and \end{titlepage} and 
% move this file to the same directory as the LaTeX file you wish to add it to. 
% Then add \input{./title_page_1.tex} to your LaTeX file where you want your
% title page.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\title{Title page with logo}
%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[12pt]{article}
\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{hyperref}
\usepackage{booktabs,array}
\usepackage{tabto}

\begin{document}

\begin{titlepage}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Defines a new command for the horizontal lines, change thickness here

\center % Center everything on the page
 
%----------------------------------------------------------------------------------------
%	HEADING SECTIONS
%----------------------------------------------------------------------------------------

\textsc{\LARGE Università degli studi di Milano-Bicocca}\\[1cm] % Name of your university/college
\textsc{\Large Decision Models}\\[0.3cm] % Major heading such as course name
\textsc{\large Final Project}\\[0.1cm] % Minor heading such as course title

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\HRule \\[0.4cm]
{ \huge \bfseries Q-ant \& Q-gen}\\[0.4cm] % Title of your document
\HRule \\[1.5cm]
 
%----------------------------------------------------------------------------------------
%	AUTHOR SECTION
%----------------------------------------------------------------------------------------

\large
\emph{Authors:}\\
Dario Bertazioli-847761-d.bertazioli@campus.unimib.it \\   % Your name
Fabrizio D'Intinosante-838866-f.dintinosante@campus.unimib.it \\
Massimiliano Perletti-XXXXXX-m.perletti2@campus.unimib.it\\[1cm] % Your name

% If you don't want a supervisor, uncomment the two lines below and remove the section above
%\Large \emph{Author:}\\
%John \textsc{Smith}\\[3cm] % Your name

%----------------------------------------------------------------------------------------
%	DATE SECTION
%----------------------------------------------------------------------------------------

{\large \today}\\[2cm] % Date, change the \today to a set date if you want to be precise

%----------------------------------------------------------------------------------------
%	LOGO SECTION
%----------------------------------------------------------------------------------------

\includegraphics{figs/logo.png}\\[1cm] % Include a department/university logo - this will require the graphicx package
 
%----------------------------------------------------------------------------------------

\vfill % Fill the rest of the page with whitespace

\end{titlepage}


\begin{abstract}
%The ABSTRACT is not a part of the body of the report itself. Rather, the abstract is a brief summary of the report contents that is often separately circulated so potential readers can decide whether to read the report. The abstract should very concisely summarize the whole report: why it was written, what was discovered or developed, and what is claimed to be the significance of the effort. The abstract does not include figures or tables, and only the most significant numerical values or results should be given.
\end{abstract}

\section{Introduction}
%The introduction should provide a clear statement of the problem posed by the project, and why the problem is of interest. It should reflect the scenario, if available. If needed, the introduction also needs to present background information so that the reader can understand the significance of the problem. A brief summary of the hypotheses and the approach your group used to solve the problem should be given, possibly also including a concise introduction to theory or concepts used later to analyze and to discuss the results.
\paragraph{The problem:}
the travelling salesman problem (TSP) is an algorithmic problem tasked with finding the shortest route between a set of points and locations that must be visited. 
In the problem statement, the points are the cities a salesperson might visit. The salesman‘s goal is to keep the distance travelled as low as possible. 
TSP has been studied for decades and several solutions have been theorized. 
The simplest solution is to try all possibilities, but this is also the most time consuming and expensive method. 
Many solutions use heuristics, which provides probability outcomes. 
It must be considered that the results are approximate and not always optimal. 
\paragraph{Our approach:}
in this project we tried to apply two meta-heuristics named \textit{Ant Colony Optimization} and \textit{Genetic Algorithm}, implementing their "classical" version and a custom one integrating \textit{Reinforcement Learning Algorithm}, namely \textit{Q-learning}.
%\paragraph{Theoretical hints:}
%improve this paragraph
%In this work we focus on two different approaches to the TSP.
%The former is the Genetic Algorithm, which we implement in its classical  

\section{Datasets}
%In this section the available data sets must be presented. The term dataset refers to any type of information source, for example web services for geolocation fall into this category. 
%In addition, all necessary data manipulation processes, such as cleaning and enrichment with external sources, must be presented and discussed.
The datasets used in this work are taken from  \url{https://wwwproxy.iwr.uni-heidelberg.de/groups/comopt/software/TSPLIB95/tsp/}, a large source of TSP datasets largely cited in literature. 
There are datasets of variable dimension and for everyone is also available the optimal solution so that is possible for us to compare our results with the optimal one.
Every solution is available at \url{https://wwwproxy.iwr.uni-heidelberg.de/groups/comopt/software/TSPLIB95/STSP.html}.
Every dataset is composed by a list of \textit{"cities"} with two coordinates points; the only preprocessing we applied was to compute a matrix containing the distance between every point and the other ones.
%here we need to talk about our dataset source
\section{The Methodological Approach}

\subsection{Theoretical context}
\paragraph{Genetic Algorithms:}
In this work we focus on two different approaches to the TSP.
The former is the \textbf{Genetic Algorithm}, which we initially implement in its classical version.
This algorithm is based on a biological metaphor: the resolution of a problem is seen as a competition among a population whose evolving individuals become better and better candidates solutions over time. 
A “fitness” function is used to evaluate each individual to decide whether it will contribute to the next
generation. 
Then, in analogy with the biological metaphor (the gene transfer in sexual reproduction), a crossover operator is applied in order to generate the next generation of the population.
This process, according to the evolutionary theory (Darwinism), should lead after a certain number of iterations to a much more fit ensemble of individuals representing "good" candidate solutions to the considered problem.

%At the beginning of a run of a genetic algorithm, a large population of random chromosomes is created. Each one, when decoded, will represent a different solution to the problem at hand. Some of the advantages of a GA (R. Haupt & S. E. Haupt 2004) include the following: • It optimizes with continuous or discrete variables;• Does not require derivative information;• Simultaneously searches through wide sampling of the cost surface;• Deals with a large number of variables and is well suited for parallel computers;• Optimizes variables with extremely complex cost surfaces (they can jump out of alocal minimum);• Provides a list of optimum variables, not just a single solution;• May encode the variables so that the optimization is done with the encodedvariables; and• Works with numerically generated data, experimental data, or analyticalfunctions.A typical genetic algorithm presents the following operators:• Crossover - this operator is used to vary the population of the chromosomes fromone generation to the next. It selects the two fittest chromosomes in the populationand produces a number of offspring. There are several crossover techniques; in thiswork, we will use the one-point crossover.• Selection - this operator replicates the most successful solutions found in apopulation at a rate proportional to their relative quality, which is determined bythe fitness function. In this paper we will use the roulette wheel selection techniquefor this operator.• Mutation - used to maintain genetic diversity from one generation of a populationof chromosomes to the next. It selects a position of an offspring chromosome withsmall probability and changes the value based on the problem model; for example,in this work, the mutation operator modifies the offspring chromosome simply bychanging the position of a gene.
The pseudo code of the standard genetic algorithm is summarized in the Fig. 2, where Tc is
the crossover rate or parameter that determines the rate at which the crossover operator is
applied, Tm is the equivalent for the mutation rate, Tp is the population size (number of
chromosomes) and MaxG the number of generations used in the experiment.

\begin{table}
\centering
\begin{tabular}{@{}>{\hspace{3em}}p{.8\linewidth}@{}}
\toprule
\unskip \textbf{Algorithm 1} Genetic Algorithm\\
{\footnotesize 1:} \textbf{procedure} Genetic(Tc,Tm,Tp,MaxIt)\\[.25\normalbaselineskip]
{\footnotesize 2:}\quad $Pop \leftarrow GeneratePopulation(Tp)$ \\
{\footnotesize 3:}\quad $Pop \leftarrow Evaluation(Pop)$ \\
{\footnotesize 4:}\quad \textbf{for} $i = 1\dots MaxIt$ \textbf{do} \\
{\footnotesize 5:}\qquad $Pop \leftarrow Selection(Pop)$ \\
{\footnotesize 6:}\qquad With probability $Tc$ do: \\
{\footnotesize 7:}\qquad $Pop \leftarrow Crossover(Pop)$ \\
{\footnotesize 8:}\qquad $Pop \leftarrow Selection(Pop)$ \\
{\footnotesize 9:}\qquad With probability $Tm$ do: \\
{\footnotesize 10:}\qquad $Pop \leftarrow Mutation(Pop)$ \\
{\footnotesize 11:}\quad \textbf{end for} \\
{\footnotesize 12:} \quad \textbf{return} the best solution in $Pop$ \\
{\footnotesize 13:} \textbf{end procedure} \\
\bottomrule
\end{tabular}
\caption{Genetic Algorithm pseudocode}
\end{table}

With the aim to explore a new variation of the standard algorithm, we try to integrate a \textbf{Q-Learning} Algorithm in the genetic procedure in order to provide a better guideline for the initialization of the population and the crossover operation.
% insert Q-version

\paragraph{Ant Colony Optimization:}
The latter kind of algorithm we implement is the \textbf{Ant Colony Optimization} algorithm 


\begin{table}
\centering
\begin{tabular}{@{}>{\hspace{3em}}p{.8\linewidth}@{}}
\toprule
\unskip \textbf{Algorithm 2} Ant Colony Optimization \\
[.25\normalbaselineskip]
\textbf{Main Algorithm}\\[.25\normalbaselineskip]
{\footnotesize 1:} \textbf{for} generation \textbf{in} generations: \\
{\footnotesize 2:} \quad create n\_ants artificial ants \\
{\footnotesize 3:} \quad \textbf{for} one\_ant \textbf{in} ants: \\
{\footnotesize 4:} \qquad make\_path \\
{\footnotesize 5:} \qquad compute\_path\_length \\
{\footnotesize 6:} \qquad update best\_dist and best\_path \\
{\footnotesize 7:} \quad update pheromon matrix (local for child process) \\
{\footnotesize 8:} \textbf{return} best\_dist, best\_sol \\
[.25\normalbaselineskip]
\textbf{Make path}\\[.25\normalbaselineskip]
{\footnotesize 1:} start from a vertex \\
{\footnotesize 2:} add start vertex to visited nodes \\
[.25\normalbaselineskip]
{\footnotesize 3:} \textbf{for} each remaining vertex: \\
{\footnotesize 4:} \quad list the neighbors \\
{\footnotesize 5:} \quad list the not yet visited neighb \\
{\footnotesize 6:} \quad calculate the probability of choosing a vertex \\
{\footnotesize 7:} \quad choice the vertex according to probability \\
{\footnotesize 8:} \quad add the vertex to the passed list \\
{\footnotesize 9:} \quad return the chosen vertex id \\
[.25\normalbaselineskip]
\textbf{Update pheromon matrix}\\[.25\normalbaselineskip]
{\footnotesize 1:} \textbf{evaporate pheromon} \\
{\footnotesize 2:} \textbf{for} ant \textbf{in} ant\_colony : \\
{\footnotesize 3:} \quad \textbf{for} each vertex of one\_ant\_path : \\
{\footnotesize 4:} \qquad pheromon\_matrix.increase(c\_v, n\_v,+1) \\
[.25\normalbaselineskip]
\textbf{Update pheromon matrix}\\[.25\normalbaselineskip]
{\footnotesize 1:} gather from MPI env all the pm matrix \\
{\footnotesize 2:} \textbf{if} process is the parent process (rank==0): \\
{\footnotesize 3:}\quad for each element average over the n\_cores matrices. \\
{\footnotesize 4:} broadcast obtained pm matrix to the child process \\
\bottomrule
\end{tabular}
\caption{Ant Colony pseudocode}
\end{table}

%This is the central and most important section of the report. Its objective must be to show, with linearity and clarity, the steps that have led to the definition of a decision model. The description of the working hypotheses, confirmed or denied, can be found in this section together with the description of the subsequent refining processes of the models. Comparisons between different models (e.g. heuristics vs. optimal models) in terms of quality of solutions, their explainability and execution times are welcome. 

%Do not attempt to describe all the code in the system, and do not include large pieces of code in this section, use pseudo-code where necessary. Complete source code should be provided separately (in Appendixes, as separated material or as a link to an on-line repo). Instead pick out and describe just the pieces of code which, for example:
%\begin{itemize}
%\item are especially critical to the operation of the system;
%\item you feel might be of particular interest to the reader for some reason;
%\item  illustrate a non-standard or innovative way of implementing an algorithm, data
%structure, etc..
%\end{itemize}

%You should also mention any unforeseen problems you encountered when implementing the
%system and how and to what extent you overcame them. Common problems are:
 %difficulties involving existing software.


\section{Results and Evaluation}
The Results section is dedicated to presenting the actual results (i.e. measured and calculated quantities), not to discussing their meaning or interpretation. The results should be summarized using appropriate Tables and Figures (graphs or schematics). Every Figure and Table should have a legend that describes concisely what is contained or shown. Figure legends go below the figure, table legends above the table. Throughout the report, but especially in this section, pay attention to reporting numbers with an appropriate number of significant figures. 

\section{Discussion}
The discussion section aims at interpreting the results in light of the project's objectives. The most important goal of this section is to interpret the results so that the reader is informed of the insight or answers that the results provide. This section should also present an evaluation of the particular approach taken by the group. For example: Based on the results, how could the experimental procedure be improved? What additional, future work may be warranted? What recommendations can be drawn?


\section{Conclusions}
Conclusions should summarize the central points made in the Discussion section, reinforcing for the reader the value and implications of the work. If the results were not definitive, specific future work that may be needed can be (briefly) described. The conclusions should never contain ``surprises''. Therefore, any conclusions should be based on observations and data already discussed. It is considered extremely bad form to introduce new data in the conclusions.

\section*{References}

The references section should contain complete citations following standard form.  The references should be numbered and listed in the order they were cited in the body of the report. In the text of the report, a particular reference can be cited by using a numerical number in brackets as \cite{Lee2015} that corresponds to its number in the reference list. \LaTeX provides several styles to format the references

\bibliographystyle{IEEEtran}
\bibliography{references.bib}

\end{document}